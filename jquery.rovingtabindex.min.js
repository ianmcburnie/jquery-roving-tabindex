
(function($,window,document,undefined){var pluginName='jquery-roving-tabindex';$.fn.rovingTabindex=function rovingTabindex(rovingItems,options){options=$.extend({axis:'both',wrap:true,activeIndex:0,setFocus:true},options);return this.each(function onEachMatchedEl(){var $widget=$(this);var $rovingItems=$widget.find(rovingItems);var numRovingItems=$rovingItems.length;var currentItemIndex=options.activeIndex;if(currentItemIndex>=numRovingItems){currentItemIndex=0;}
function updateModel(roveToIndex){var $roveFromEl=$rovingItems.eq(currentItemIndex);var $roveToEl=$rovingItems.eq(roveToIndex);$roveFromEl.removeAttr('tabindex');$roveToEl.attr('tabindex','0');if(options.setFocus===true){setTimeout(function(){$roveToEl.focus();},0);}
currentItemIndex=$roveToEl.data(pluginName).idx;$widget.trigger('rovingTabindexChange',$roveToEl);}
function roveToPrevItem(e){var isOnFirstEl=(currentItemIndex===0);var roveToIndex;if(isOnFirstEl){if(options.wrap===true){roveToIndex=numRovingItems-1;}}else{roveToIndex=currentItemIndex-1;}
updateModel(roveToIndex);}
function roveToNextItem(e){var isOnLastEl=(currentItemIndex===numRovingItems-1);var roveToIndex;if(isOnLastEl){if(options.wrap===true){roveToIndex=0;}}else{roveToIndex=currentItemIndex+1;}
updateModel(roveToIndex);}
$rovingItems.on('click',function(e){updateModel($(e.target).data(pluginName).idx);});$rovingItems.each(function onEachMatchedDescendantEl(idx,itm){$(itm).data(pluginName,{idx:idx});});$rovingItems.eq(currentItemIndex).attr('tabindex','0');$rovingItems.commonKeyDown();if(options.axis==='x'){$rovingItems.on('leftArrowKeyDown',roveToPrevItem);$rovingItems.on('rightArrowKeyDown',roveToNextItem);}else if(options.axis==='y'){$rovingItems.on('upArrowKeyDown',roveToPrevItem);$rovingItems.on('downArrowKeyDown',roveToNextItem);}else{$rovingItems.on('leftArrowKeyDown upArrowKeyDown',roveToPrevItem);$rovingItems.on('rightArrowKeyDown downArrowKeyDown',roveToNextItem);}});};}(jQuery,window,document));