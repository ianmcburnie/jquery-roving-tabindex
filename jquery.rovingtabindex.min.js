
(function($,window,document,undefined){var pluginName='jquery-roving-tabindex';$.fn.rovingTabindex=function rovingTabindex(rovingItems,options){options=$.extend({axis:'both',wrap:true,activeIndex:0,setFocus:true},options);return this.each(function onEachMatchedEl(){var $widget=$(this);var $rovingItems=$widget.find(rovingItems);function updateFocus($el){setTimeout(function(){$el.focus();},0);}
function prev(e){var $target=$(e.target);var itemIdx=$target.data(pluginName).idx;var isFirstEl=(itemIdx===0);var $roveToEl;if(isFirstEl){if(options.wrap===true){$roveToEl=$rovingItems.eq($rovingItems.length-1);}}else{$roveToEl=$rovingItems.eq(itemIdx-1);}
if(options.setFocus===true){updateFocus($roveToEl);}}
function next(e){var $target=$(e.target);var itemIdx=$target.data(pluginName).idx;var isLastEl=(itemIdx===$rovingItems.length-1);var $roveToEl;if(isLastEl){if(options.wrap===true){$roveToEl=$rovingItems.eq(0);}}else{$roveToEl=$rovingItems.eq(itemIdx+1);}
if(options.setFocus===true){updateFocus($roveToEl);}}
$rovingItems.on('focus',function(e){var $target=$(e.target);var $current=$widget.find('[tabindex=0]');if(!$target.is($current)){$current.attr('tabindex','-1');$target.attr('tabindex','0');$widget.trigger('rovingTabindexChange',$target);}});$rovingItems.each(function onEachMatchedDescendantEl(idx,itm){$(itm).data(pluginName,{'idx':idx});$(itm).attr('tabindex',(options.activeIndex===idx)?0:'-1');});$rovingItems.commonKeyDown();if(options.axis==='x'){$rovingItems.on('leftArrowKeyDown',prev);$rovingItems.on('rightArrowKeyDown',next);}else if(options.axis==='y'){$rovingItems.on('upArrowKeyDown',prev);$rovingItems.on('downArrowKeyDown',next);}else{$rovingItems.on('leftArrowKeyDown upArrowKeyDown',prev);$rovingItems.on('rightArrowKeyDown downArrowKeyDown',next);}});};}(jQuery,window,document));